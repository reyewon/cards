<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kink & Tell</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Background particles -->
  <div id="background-particles" aria-hidden="true">
    <div class="particle pink"></div>
    <div class="particle cyan"></div>
    <div class="particle pink"></div>
    <div class="particle cyan"></div>
    <div class="particle pink"></div>
    <div class="particle cyan"></div>
    <div class="particle pink"></div>
    <div class="particle cyan"></div>
  </div>

  <!-- Welcome -->
  <main id="welcomeContainer" class="shell card">
    <img src="https://raw.githubusercontent.com/reyewon/cards/refs/heads/main/KNT2.png" alt="Kink and Tell" id="logo" />

    <h1 class="page-title">Choose your adventure...</h1>

    <section class="welcome-grid">
      <div class="mode-selection stack-lg">
        <button id="groupModeBtn" class="mode-btn">
          <div class="mode-btn__title">Group</div>
          <div class="mode-btn__copy">Kinky secrets and devious tasks for a group of friends.</div>
        </button>
        <button id="coupleModeBtn" class="mode-btn">
          <div class="mode-btn__title">Couple</div>
          <div class="mode-btn__copy">Designed for ENM and kink couples, with role-aware prompts.</div>
        </button>
        <button id="friendsModeBtn" class="mode-btn">
          <div class="mode-btn__title">Friends</div>
          <div class="mode-btn__copy">Honest revelations and sex-positive chats for two friends.</div>
        </button>
      </div>

      <aside class="welcome-controls stack-lg">
        <div class="panel stack-sm">
          <h2 class="panel-title">Spiciness</h2>
          <p class="panel-help">Filters apply to questions and forfeits.</p>
          <!-- JS will inject pill buttons here and hide these checkboxes -->
          <label class="toggle"><input type="checkbox" id="spiceTame" checked> Tame</label>
          <label class="toggle"><input type="checkbox" id="spiceSpicy" checked> Spicy</label>
          <label class="toggle"><input type="checkbox" id="spiceFilthy" checked> Filthy</label>
          <div id="spicePills" class="pills" aria-label="Spiciness"></div>
        </div>

        <a href="#" id="tutorialLink" class="link-cta">How to play</a>
      </aside>
    </section>
  </main>

  <!-- Couple / Friends setup -->
  <section id="coupleSetupContainer" class="shell card" hidden>
    <img src="https://raw.githubusercontent.com/reyewon/cards/refs/heads/main/KNT2.png" alt="Kink and Tell" id="logo-small" />
    <h2 class="section-title">Enter names and select roles</h2>

    <div class="input-grid">
      <label class="field">
        <span>Player 1</span>
        <input type="text" id="player1" placeholder="Name" />
      </label>
      <label class="field" id="player1RoleRow">
        <span>Role</span>
        <select id="player1Role">
          <option value="switch">Switch</option>
          <option value="Dom">Dom</option>
          <option value="sub">Sub</option>
        </select>
      </label>

      <label class="field">
        <span>Player 2</span>
        <input type="text" id="player2" placeholder="Name" />
      </label>
      <label class="field" id="player2RoleRow">
        <span>Role</span>
        <select id="player2Role">
          <option value="switch">Switch</option>
          <option value="Dom">Dom</option>
          <option value="sub">Sub</option>
        </select>
      </label>
    </div>

    <div class="actions end">
      <button id="addCustomBtn" class="btn ghost">Add custom card</button>
      <button id="startCoupleGameButton" class="btn primary">Start game</button>
    </div>
  </section>

  <!-- Group setup -->
  <section id="groupSetupContainer" class="shell card" hidden>
    <img src="https://raw.githubusercontent.com/reyewon/cards/refs/heads/main/KNT2.png" alt="Kink and Tell" id="logo-small" />
    <h2 class="section-title">Add players to the group</h2>

    <div class="add-player">
      <input type="text" id="newPlayerName" placeholder="Enter player name..." />
      <button id="addPlayerBtn" title="Add" class="btn primary plus">+</button>
    </div>

    <ul id="playerList" class="list"></ul>

    <div class="actions end">
      <button id="addCustomBtnGroup" class="btn ghost">Add custom card</button>
      <button id="startGroupGameButton" class="btn primary">Start game</button>
    </div>
  </section>

  <!-- Game screen -->
  <section id="gameContainer" class="shell card" hidden>
    <a href="#" id="homeLogoLink" title="Save and exit" class="home-link">
      <img src="https://raw.githubusercontent.com/reyewon/cards/refs/heads/main/KNT2.png" alt="Home" id="persistentLogo" />
    </a>

    <header class="game-header">
      <span id="modeBadge" class="badge mode">Mode</span>
      <span id="turnIndicator" class="turn"></span>
      <span id="progressBadge" class="badge subtle" title="Cards used in this deck">0 used</span>
    </header>

    <div class="meta">
      <span id="cardTypeLabel" class="chip">â€”</span>
      <span id="repeatNotice" class="chip warn" hidden>Deck exhausted, repeats may appear</span>
    </div>

    <div id="questionCard" class="card-content" aria-live="polite">Tap Next to begin.</div>
    <div id="forfeitCard" class="card-content forfeit" hidden></div>

    <div id="timerBar" class="timer" hidden>
      <span id="timerDisplay">00:00</span>
      <button id="timerStart" class="btn tone">Start</button>
      <button id="timerPause" class="btn tone">Pause</button>
      <button id="timerReset" class="btn tone">Reset</button>
    </div>

    <nav class="sticky">
      <button id="undoButton" class="btn tone" title="Undo last">Undo</button>
      <button id="skipButton" class="btn tone" title="Skip this card">Skip</button>
      <button id="forfeitButton" class="btn accent" title="Take a forfeit">Forfeit</button>
      <button id="nextButton" class="btn primary" title="Next question">Next</button>
      <button id="newGameButton" class="btn ghost" title="New game">New game</button>
    </nav>

    <p id="swipeHint" class="hint">Swipe right for Next, up for Forfeit</p>
  </section>

  <!-- Interstitial -->
  <section id="interstitialContainer" class="shell card" hidden>
    <h3 id="interstitialMessage">Pass the device</h3>
    <p>You're asking the next question.</p>
    <button id="readyButton" class="btn primary">Ready</button>
  </section>

  <footer class="site-footer">
    <span>Created by <a href="https://www.instagram.com/rystadom" target="_blank" rel="noopener">Rysta</a></span>
  </footer>

  <!-- Tutorial Modal -->
  <dialog id="tutorialModal" class="dialog">
    <h3>How to play</h3>
    <ol class="stack-sm">
      <li>Pick a mode and set spiciness.</li>
      <li>Enter names, then pass the device between players.</li>
      <li>Draw questions, take forfeits, add your own cards if you like.</li>
    </ol>
    <button id="closeTutorial" class="btn primary">Close</button>
  </dialog>

  <!-- Custom Card Modal -->
  <dialog id="customModal" class="dialog">
    <h3>Add a custom card</h3>
    <label class="field">
      <span>Card type</span>
      <select id="customKind">
        <option value="question">Question</option>
        <option value="forfeit">Forfeit</option>
      </select>
    </label>

    <label id="customSubtypeWrap" class="field">
      <span>Subtype (Couple mode only)</span>
      <select id="customSubtype">
        <option value="neutral">Neutral</option>
        <option value="D_asks_S">Dom asks Sub</option>
        <option value="S_asks_D">Sub asks Dom</option>
      </select>
    </label>

    <label class="field">
      <span>Spiciness</span>
      <select id="customSpice">
        <option value="tame">Tame</option>
        <option value="spicy">Spicy</option>
        <option value="filthy">Filthy</option>
      </select>
    </label>

    <label class="field">
      <span>Text</span>
      <textarea id="customText" rows="4" placeholder="Write your card text..."></textarea>
    </label>

    <div class="actions end">
      <button id="cancelCustom" class="btn ghost">Cancel</button>
      <button id="saveCustom" class="btn primary">Save</button>
    </div>
  </dialog>

  <!-- Reset Modal -->
  <dialog id="resetModal" class="dialog">
    <h3>New game</h3>
    <p>Do you want to save and exit, or hard reset everything?</p>
    <div class="actions end">
      <button id="resetCancel" class="btn ghost">Cancel</button>
      <button id="saveExit" class="btn tone">Save and exit</button>
      <button id="hardReset" class="btn primary">Hard reset</button>
    </div>
  </dialog>

  <script src="script.js" defer></script>
</body>
</html>
