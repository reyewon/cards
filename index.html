<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kink and Tell Game by Rysta</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Background particle effect -->
    <div id="background-particles"></div>

    <!-- Welcome Screen: Choose Play Style -->
    <div id="welcomeContainer" class="container">
        <img src="https://raw.githubusercontent.com/reyewon/cards/refs/heads/main/KNT2.png" alt="Kink and Tell Logo" id="logo">
        <p class="instruction-text">How do you want to play?</p>
        <div class="button-group-vertical">
            <button id="showCreateGameBtn" class="mode-btn">Create Online Game</button>
            <button id="showJoinGameBtn" class="mode-btn">Join Online Game</button>
            <button id="showLocalPlayBtn" class="mode-btn">Play Locally (Pass Device)</button>
        </div>
    </div>

    <!-- Local Play Setup Screen -->
    <div id="localSetupContainer" class="container setup-container">
        <img src="https://raw.githubusercontent.com/reyewon/cards/refs/heads/main/KNT2.png" alt="Kink and Tell Logo" class="logo-small">
        <p class="instruction-text">Choose your adventure...</p>
        <div class="mode-selection">
             <button class="mode-btn" data-mode="group"><h3>Group</h3></button>
             <button class="mode-btn" data-mode="couple"><h3>Couple</h3></button>
             <button class="mode-btn" data-mode="friends"><h3>Friends</h3></button>
        </div>
        <!-- Player setup will be dynamically added here by JS -->
        <div id="localPlayerSetup"></div>
        <button id="startLocalGameBtn">Start Game</button>
        <button class="back-btn" data-target="welcomeContainer">Back</button>
    </div>

    <!-- Create Online Game Screen -->
    <div id="createGameContainer" class="container setup-container">
        <img src="https://raw.githubusercontent.com/reyewon/cards/refs/heads/main/KNT2.png" alt="Kink and Tell Logo" class="logo-small">
        <p class="instruction-text">Choose your adventure...</p>
        <div class="mode-selection">
            <button class="mode-btn" data-mode="group"><h3>Group</h3><p>Kinky secrets for a group of friends.</p></button>
            <button class="mode-btn" data-mode="couple"><h3>Couple</h3><p>The original game for ENM couples.</p></button>
            <button class="mode-btn" data-mode="friends"><h3>Friends</h3><p>Revealing chats for two friends.</p></button>
        </div>
        <div class="input-group">
            <input type="text" id="hostNameInput" placeholder="Enter Your Name...">
        </div>
        <button id="createGameBtn">Create Online Game</button>
        <button class="back-btn" data-target="welcomeContainer">Back</button>
    </div>

    <!-- Join Online Game Screen -->
    <div id="joinGameContainer" class="container setup-container">
        <img src="https://raw.githubusercontent.com/reyewon/cards/refs/heads/main/KNT2.png" alt="Kink and Tell Logo" class="logo-small">
        <p class="instruction-text">Enter the code to join the game!</p>
        <div class="input-group">
            <input type="text" id="gameCodeInput" placeholder="Enter 5-Digit Game Code" maxlength="5" autocapitalize="characters">
            <input type="text" id="playerNameInput" placeholder="Enter Your Name">
        </div>
        <button id="joinGameBtn">Join Game</button>
        <p id="joinErrorText" class="error-text"></p>
        <button class="back-btn" data-target="welcomeContainer">Back</button>
    </div>

    <!-- Online Lobby Screen -->
    <div id="lobbyContainer" class="container">
        <p class="instruction-text">Waiting for players...</p>
        <p>Share this Game Code:</p>
        <div id="lobbyGameCode" class="game-code-display"></div>
        <p>Players in the lobby:</p>
        <ul id="lobbyPlayerList"></ul>
        <button id="startGameBtn" class="host-only">Start Game</button>
        <button id="leaveGameBtn">Leave Game</button>
    </div>

    <!-- Main Game Screen -->
    <div id="gameContainer" class="container">
        <a href="#" id="homeLogoLink" title="Restart Game">
            <img src="https://raw.githubusercontent.com/reyewon/cards/refs/heads/main/KNT2.png" alt="Kink and Tell Home" id="persistentLogo">
        </a>
        <div id="turnIndicator"></div>
        <div id="questionCard"></div>
        <div id="forfeitCard"></div>
        <div class="button-group">
            <button id="nextButton">Next Question</button>
            <button id="forfeitButton">Take a Forfeit</button>
        </div>
    </div>
    
    <!-- Interstitial "Pass Device" Screen -->
    <div id="interstitialContainer" class="container">
        <h3 id="interstitialMessage"></h3>
        <p>You're asking the next question!</p>
        <button id="readyButton">Ready!</button>
    </div>

    <footer>
        Created by <a href="https://www.instagram.com/rystadom" target="_blank">Rysta</a>
    </footer>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <!-- Game Logic -->
    <script src="script.js"></script>
</body>
</html>
